if status is-interactive
    set fish_greeting
    set PATH ~/.local/bin ~/.cargo/bin/ $PATH

    # OS SPECIFIC ------------------------------
    switch (uname -o)
        case GNU/Linux
            if command -v xclip &>/dev/null
                alias pbcopy='xclip -selection clipboard'
                alias pbpaste='xclip -selection clipboard -o'
            else if command -v xsel &>/dev/null
                alias pbcopy='xsel --clipboard --input'
                alias pbpaste='xsel --clipboard --output'
            else if command -v wl-copy &>/dev/null
                alias pbcopy=wl-copy
                alias pbpaste=wl-paste
            end
            alias open=xdg-open
        case Android
            alias pbcopy='termux-clipboard-set'
            alias pbpaste='termux-clipboard-get'
            alias open='termux-open'
        case Darwin
            alias charm='/Applications/PyCharm\ CE.app/Contents/MacOS/pycharm'
            set PATH /opt/homebrew/bin $PATH
            set HOMEBREW_INSTALL_FROM_API 1
    end
    alias pbc=pbcopy
    alias pbp=pbpaste
    alias o=open

    # EDITOR ------------------------------
    if command -v emacs &>/dev/null
        alias em="emacs -nw -Q --eval '(progn (setq make-backup-files nil) (menu-bar-mode -1))'"
        alias macs="emacsclient -a '' -c -nw"
    end
    if command -v nvim &>/dev/null
        set -gx VISUAL nvim
        alias vi=nvim
    end
    set -gx EDITOR vi
    if command -v fzf &>/dev/null
        alias vf='vi $(fzf)'
    end

    # ALIAS ------------------------------
    if command -v rsync &>/dev/null
        alias cpv='rsync -ah --info=progress2'
    end
    alias ff='find . -type f -iname'
    alias ve='python3 -m venv ./venv'
    alias va='source ./venv/bin/activate'
    alias vd=deactivate
    alias www='ifconfig | grep broadcast ; python3 -m http.server'
    if command -v openssl &>/dev/null
        alias getpass="openssl rand -base64 20"
    end

    # Listing directory
    alias l='ls -1A' # Lists in one column, hidden files.
    alias ll='ls -lh' # Lists human readable sizes.
    alias lr='ll -R' # Lists human readable sizes, recursively.
    alias la='ll -A' # Lists human readable sizes, hidden files.
    alias lm='la | "$PAGER"' # Lists human readable sizes, hidden files through pager.
    alias lk='ll -Sr' # Lists sorted by size, largest last.
    alias lt='ll -tr' # Lists sorted by date, most recent last.
    alias lc='lt -c' # Lists sorted by date, most recent last, shows change time.
    alias lu='lt -u' # Lists sorted by date, most recent last, shows access time.

    # Managing dotfiles
    if command -v chezmoi &>/dev/null
        alias cz='chezmoi'
        alias czu='chezmoi update'
        alias czp='chezmoi apply'
        alias cza='chezmoi add'
        alias czcd='chezmoi cd'
        alias cze='chezmoi edit'
        alias czea='chezmoi edit --apply'
        alias czra='chezmoi re-add'
    end

    # Tmux
    function tm
        if count $argv >/dev/null
            tmux a -t $argv || tmux new -s $argv
        else
            tmux a || tmux
        end
    end
    alias tml='tmux list-sessions'

    # FILE MANAGER
    if command -v lf &>/dev/null
        function lfcd --wraps="lf" --description="lf - Terminal file manager (changing directory on exit)"
            # `command` is needed in case `lfcd` is aliased to `lf`.
            # Quotes will cause `cd` to not change directory if `lf` prints nothing to stdout due to an error.
            cd "$(command lf -print-last-dir $argv)"
        end
        alias lf=lfcd
    end

    # PROMPT ------------------------------
    if ! test -f "$HOME/.config/fish/conf.d/_tide_init.fish"
        if command -v starship &>/dev/null
            starship init fish | source
        end
    end
end

# CONDA ------------------------------
# >>> conda initialize >>>
# !! Contents within this block are managed by 'conda init' !!
if test -f $HOME/.anaconda3/bin/conda
    eval $HOME/.anaconda3/bin/conda "shell.fish" hook $argv | source
    if test -f "$HOME/.anaconda3/etc/fish/conf.d/mamba.fish"
        source "$HOME/.anaconda3/etc/fish/conf.d/mamba.fish"
    end
    # kill the right prompt __conda_add_prompt ðŸ˜ 
    function __conda_add_prompt
    end
    conda config --set auto_activate_base false
end

# <<< conda initialize <<<
